<div class="grid-container">
  <h1>Panel de administrador</h1>
  <mat-grid-list cols="3" rowHeight="175px">
    <mat-grid-tile [colspan]="mediaObserver.isActive('lt-md') ? 3 : 2" [rowspan]="3">
      <mat-card class="dashboard-card mat-elevation-z3">
        <mat-card-header>
          <mat-card-title>
            Tareas terminadas
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="dashboard-card-content">
          <div class="height-100" fxLayout="column" style="overflow-x: auto; overflow-y: hidden">
            <google-chart #tasksChart
                          [data]="pieChartData"
                          class="chart-style"></google-chart>
          </div>
          <div>
            <div fxLayout="row">
              <mat-form-field style="width: 40%">
                <mat-select placeholder="Filtrar" value="days">
                  <mat-option value="days">
                    Por días
                  </mat-option>
                  <mat-option value="weeks">
                    Por semanas
                  </mat-option>
                  <mat-option value="months">
                    Por meses
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <button mat-icon-button>
                <mat-icon>first_page</mat-icon>
              </button>
              <button mat-icon-button>
                <mat-icon>chevron_left</mat-icon>
              </button>
              <button mat-icon-button>
                <mat-icon>chevron_right</mat-icon>
              </button>
              <button mat-icon-button>
                <mat-icon>last_page</mat-icon>
              </button>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="mediaObserver.isActive('lt-md') ? 3 : 1"
                   [rowspan]="mediaObserver.isActive('lt-md') ? 2 : 1">
      <mat-card class="dashboard-card mat-elevation-z3">
        <mat-card-header>
          <mat-card-title>
            % de tareas terminadas
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="dashboard-card-content">
          <div class="height-100 width-100" fxLayout="column" fxLayoutAlign="center center">
            <mat-progress-spinner [diameter]="mediaObserver.isActive('lt-md') ? 100 : 50" [value]="50"
                                  mode="determinate"></mat-progress-spinner>
            <h2 *ngIf="!mediaObserver.isActive('lt-md')">50%</h2>
            <h1 *ngIf="mediaObserver.isActive('lt-md')">50%</h1>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="mediaObserver.isActive('lt-md') ? 3 : 1" [rowspan]="1">
      <mat-card class="dashboard-card mat-elevation-z3">
        <mat-card-header>
          <mat-card-title>
            Tareas completadas
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="dashboard-card-content">
          <div>
            <h1>57</h1>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="mediaObserver.isActive('lt-md') ? 3 : 1" [rowspan]="1">
      <mat-card class="dashboard-card mat-elevation-z3">
        <mat-card-header>
          <mat-card-title>
            Tareas restantes
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="dashboard-card-content">
          <div>
            <h1>57</h1>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="mediaObserver.isActive('lt-md') ? 3 : 1" [rowspan]="1">
      <mat-card class="dashboard-card mat-elevation-z3">
        <mat-card-header>
          <mat-card-title>
            Espacio usado
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="dashboard-card-content">
          <div>
            <h1>{{(groupInfo | async).size / 1048576 | number: '1.3-3'}}MiB/500MiB</h1>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="mediaObserver.isActive('lt-md') ? 3 : 1" [rowspan]="1">
      <mat-card class="dashboard-card mat-elevation-z3">
        <mat-card-header>
          <mat-card-title>
            Numero de miembros
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="dashboard-card-content">
          <div>
            <h1 *ngIf="(groupInfo | async).members as members">{{members}} miembro{{members > 1 ? 's' : ''}}</h1>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile *ngIf="!mediaObserver.isActive('lt-md')" [colspan]="mediaObserver.isActive('lt-md') ? 3 : 1"
                   [rowspan]="1">
      <mat-card class="dashboard-card mat-elevation-z3">
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile [colspan]="3" [rowspan]="mediaObserver.isActive('lt-md') ? 7 : 3">
      <mat-card class="dashboard-card mat-elevation-z3">
        <mat-card-header>
          <mat-card-title>
            Opciones
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="dashboard-card-content">
          <div fxLayout="row" fxLayout.lt-md="column">
            <form class="options-container" fxFlex="50" fxLayout="column">
              <div fxFlexAlign="start">
                <mat-slide-toggle #readOnly color="primary" style="width: min-content;" name="readOnly">Solo lectura
                </mat-slide-toggle>
              </div>
              <p class="text-left">Cambiar nombre</p>
              <mat-form-field>
                <input #projectName matInput maxlength="30" placeholder="Nombre del proyecto" type="text" name="name"
                       [value]="(groupInfo | async).name">
                <mat-hint>Longitud máxima de 30 caracteres</mat-hint>
              </mat-form-field>
              <p class="text-left">Agregar usuarios</p>
              <mat-form-field>
                <textarea cdkTextareaAutosize matInput placeholder="Nombre de usuario"></textarea>
              </mat-form-field>
              <p class="text-left">Eliminar usuarios</p>
              <mat-form-field>
                <textarea cdkTextareaAutosize matInput placeholder="Nombre de usuario"></textarea>
              </mat-form-field>
              <button (click)="changeDescription()" color="accent" mat-flat-button>CAMBIAR DESCRIPCIÓN</button>
              <button color="primary" type="submit" mat-flat-button
                      (click)="editInfo(readOnly.checked, projectName.value)">GUARDAR CAMBIOS
              </button>
            </form>

            <form class="options-container" fxFlex="50" fxLayout="column" *ngIf="(groupInfo | async) as $groupInfo">
              <div *ngIf="$groupInfo.isRoot" class="width-100">
                <h2 class="width-100">Vincular con repositorio de GitHub</h2>
                <button color="primary" mat-flat-button (click)="openLinkToGitHubDialog()" class="width-100">VINCULAR
                </button>
              </div>
              <div class="width-100" *ngIf="!$groupInfo.isLinkedToDevOps">
                <h2 class="width-100">Vincular con Azure DevOps</h2>
                <button color="primary" mat-flat-button (click)="openVSDevOpsAuth()" class="width-100">VINCULAR</button>
              </div>
              <div *ngIf="$groupInfo.isRoot && $groupInfo.isLinkedToDevOps" class="width-100" fxLayout="column">
                <h2>DevOps</h2>
                <mat-form-field>
                  <input #devOpsOrgName matInput type="text">
                  <mat-label>Nombre de la organización</mat-label>
                </mat-form-field>
                <mat-form-field>
                  <input #devOpsProjectName matInput type="text">
                  <mat-label>Nombre del proyecto</mat-label>
                </mat-form-field>
                <button mat-flat-button color="accent"
                        [disabled]="devOpsOrgName.value.trim() === '' || devOpsProjectName.value.trim() === ''"
                        (click)="changeDevOpsInfo(devOpsOrgName.value, devOpsProjectName.value)">CAMBIAR INFORMACIÓN
                </button>
              </div>
            </form>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>


  </mat-grid-list>
</div>
