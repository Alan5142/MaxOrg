<app-kanban-toolbar></app-kanban-toolbar>
<div *ngIf="groups | async;else loading">
  <div cdkDropListGroup class="board">


    <div class="card-list mat-elevation-z5 card-holder" ngClass="" ngClass.lt-md="card-mobile"
         *ngFor="let group of groups | async">
      <div cdkDragHandle fxLayout="row">
        <h2 class="mat-h2">{{group.name}}
        </h2>
        <div fxFlex></div>
        <button style="top: -15px;" mat-icon-button fxFlexAlign="baseline" (click)="addCardToSection(group.id)">
          <mat-icon>add</mat-icon>
        </button>
        <button style="top: -15px;" mat-icon-button fxFlexAlign="baseline">
          <mat-icon>more_horiz</mat-icon>
        </button>
      </div>

      <div class="card-list-content"
           cdkDropList
           [id]="group.id"
           [cdkDropListData]="group.cards"
           (cdkDropListDropped)="onTaskDrop($event)" style="background-color: cornflowerblue;">
        <mat-card style="margin: 2%;" *ngFor="let task of group.cards; trackBy: trackUsingId" cdkDrag>
          <mat-card-content>
            <h2>{{task.title}}</h2>
            <p>{{task.description}}</p>
          </mat-card-content>
        </mat-card>
      </div>

    </div>
  </div>
</div>

<app-context-menu #contextMenu>
  <button mat-button>Hola mundo</button>
</app-context-menu>

<ng-template #loading>
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</ng-template>
